<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="generic_grid" name="Generic grid">
		<div class="col-md-12 mt32">
			<t t-foreach="options" t-as="option">
				<div t-attf-class="{{ div_class }} mb16">
					<div class="row ons-pricing-row" t-attf-id="{{ slug(option) }}">
						<div class="col-md-1 col-xs-1 ons-pricing-logo">
							<div t-field="option.logo" t-options="{'widget': 'image'}"/>
						</div>
						<div class="col-md-6 col-xs-6 ons-pricing-app" t-attf-id="{{ slug(option) }}">
							<h3 t-field="option.name" class="mt0 ons-pricing-title data_title"></h3>
						</div>
						<div class="col-md-4">
							<span t-esc="option.price" class="data_price"/> CHF <!-- t-options="{'widget': 'monetary', 'display_currency': 'website.currency_id'}" -->
						</div>
						<div class="col-md-1">
							<input type="checkbox" t-attf-class="{{ option_class }}" t-attf-id="{{ slug(option) }}"/>
							<span t-field="option.sequence" class="sequence" t-attf-sequence-id="{{ slug(option) }}" style="display: none;"/>
						</div>
					</div>
				</div>
			</t>
		</div>
	</template>

	<template id="opennet_pricing_template" name="Open-net pricing">
		<t t-call="website.layout">
			<script src='/ons_cust_opennet/static/src/js/ons_cust_opennet_pricing.js'/>
			<div class="container">
				<div class="row">
					<div class="col-md-9 col-xs-9">
						<div class="page-header">
						  	<h1>Open-Net <small>pricing</small></h1>
						</div>
						<div class="col-md-12">
							<h3>Définissez le nombre d'Utilisateurs</h3>
							<form>
								<div class="input-group">
								  	<input type="number" value="1" min="1" class="form-control" placeholder="nombre d'utilisateur(s)" id="user_select"/>
								  	<span class="input-group-addon">Utilisateurs x <span t-esc="'%.2f' % user_price[0]['ons_user_price']" id="user_pricing"/></span>
								</div>
							</form>
						</div>
						<div class="col-md-12 mt32">
							<t t-foreach="areas" t-as="area">
								<t t-if="area.sequence != 1">
									<t t-set="selected_class"></t>
								</t>
								<t t-elif="area.sequence == 1">
									<t t-set="selected_class">selected</t>
								</t>
								<div t-attf-class="{{ selected_class }} col-md-12 col-xs-12 ons-pricing-area functionnal-area mb16">
									<div class="row ons-pricing-row" t-attf-id="{{ slug(area) }}">
										<div class="col-md-1 col-xs-1 ons-pricing-logo">
											<div t-field="area.logo" t-options="{'widget': 'image'}"/>
										</div>
										<div class="col-md-6 col-xs-6 ons-pricing-app" t-attf-id="{{ slug(area) }}">
											<h3 t-field="area.name" class="mt0 ons-pricing-title data_title"></h3>
										</div>
										<div class="col-md-4">
											<span t-esc="'%.2f' % area.price" class="data_price ons-pricing-app-price"/> CHF
										</div>
										<div class="col-md-1">
											<t t-if="area.sequence != 1">
												<input type="checkbox" class="area-checkbox checkbox text-right"  t-attf-id="{{ slug(area) }}"/>
												<!-- t-attf-id="{{ area.id }}" -->
											</t>
											<t t-elif="area.sequence == 1">
												<input type="checkbox" disabled="disabled" class="area-checkbox checkbox" checked="checked" t-attf-id="{{ slug(area) }}"/>
											</t>
											<t t-foreach="area.area_dependencies_id.depend_area_ids" t-as="depend">
												<span t-field="depend.name" class="depend_name" t-attf-depend-id="{{ slug(depend) }}" style="display: none;"/>
											</t>
											<span t-field="area.sequence" class="sequence" t-attf-sequence-id="{{ slug(area) }}" style="display: none;"/>
										</div>
									</div>
									<div class="row ons-pricing-row-modules">
										<div class="col-md-12 col-xs-12">
											<h4>Fonctionnalités</h4>
										</div>
										<t t-foreach="area.app_ids" t-as="app">
											<div class="col-md-2 col-xs-6">
												<div class="row mb16">
													<div class="col-md-4 col-xs-4 ons-pricing-logo">
														<div t-field="app.icon_image" t-options="{'widget': 'image'}"/>
													</div>
													<div class="col-md-8 col-xs-8">
														<span t-field="app.shortdesc"></span>
														<t t-if="app.license == 'OEEL-1'">
															<span> (E)</span>
														</t>
														<t t-else="">
															<span> (C)</span>
														</t>
													</div>
												</div>
											</div>
										</t>
									</div>
									<div class="row ons-pricing-row-include">
										<div class="col-md-12 col-xs-12">
											<h4>Inclu</h4>
										</div>
										<div class="col-md-12 col-xs-12">
											<p t-field="area.description"></p>
										</div>
									</div>
								</div>
							</t>
						</div>
						<t t-set="options" t-value="options_logi"/>
						<t t-set="option_class">logi_checkbox</t>
						<t t-set="div_class">col-md-12 mb16 ons-pricing-area</t>
						<t t-call="ons_cust_opennet.generic_grid"/>

						<t t-set="options" t-value="options_tech"/>
						<t t-set="option_class">tech_checkbox</t>
						<t t-set="div_class">col-md-12 mb16 ons-pricing-area</t>
						<t t-call="ons_cust_opennet.generic_grid"/>

						<t t-set="options" t-value="options_misc"/>
						<t t-set="option_class">misc_checkbox</t>
						<t t-set="div_class">col-md-12 mb16 ons-pricing-area</t>
						<t t-call="ons_cust_opennet.generic_grid"/>

						<t t-set="options" t-value="hosting"/>
						<t t-set="option_class">hosting_checkbox</t>
						<t t-set="div_class">col-md-12 mb16 ons-pricing-area hosting-area</t>
						<t t-call="ons_cust_opennet.generic_grid"/>
					</div>
					<div class="col-md-3 col-xs-3">
						<div class="row follow-scroll">
							<div class="col-md-12">
								<div class="page-header">
						  			<h1>Open-Net <small>pricing</small></h1>
								</div>
						        <table class="table">
						        	<thead>
								      	<tr>
								        	<th></th>
								        	<th class="text-right">Mensuel</th>
								        	<th class="text-right">Annuel</th>
								      	</tr>
								    </thead>
								    <tbody>
								    	<tr class="base_row" t-attf-sequence="0">
											<td><span id="user_selected"/></td>
											<td class="text-right monthly"><span id="monthly_price"/></td>
											<td class="text-right annualy"><span id="annualy_price"/></td>
										</tr>
								    </tbody>
								    <tbody id="tbody_area">
										<t t-foreach="areas" t-as="area">
											<t t-if="area.sequence == 1">
												<tr class="base_row" t-attf-sequence="{{ area.sequence }}">
													<td><span t-field="area.name" class="area_name_data"/></td>
													<td class="text-right monthly"><span t-esc="area.price" class="area_price_data"/></td>
													<td class="text-right annualy"><span class="area_annualy_price_data"/></td>
												</tr>
											</t>
										</t>
									</tbody>
									<tbody id="tbody_option">
									</tbody>
									<tbody id="tbody_hosting">
									</tbody>
									<tbody>
										<tr class="active" t-attf-sequence="9999">
											<td>Total</td>
											<td class="text-right"><span class="monthly_total"/> CHF</td>
											<td class="text-right"><span class="annualy_total"/> CHF</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</t>
	</template>

	<record id="opennet_pricing_user" model="ir.ui.view">
		<field name="name">res.company.form</field>
		<field name="model">res.company</field>
		<field name="inherit_id" ref="base.view_company_form"/>
		<field name="arch" type="xml">
	        <xpath expr="//field[@name='website']" position="after">
	            <field name="ons_user_price" />
	        </xpath>
	    </field>
    </record>

</odoo>
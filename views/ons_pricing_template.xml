<?xml version="1.0" encoding="utf-8"?>
<odoo>

	<template id="generic_grid" name="Generic grid">
		<div class="row">
			<t t-foreach="options" t-as="option">
				<div class="col-md-4 mb16 ons-pricing-area">
					<div class="row ons-pricing-row">
						<div class="col-md-3 ons-pricing-logo">
							<div t-field="option.logo" t-options="{'widget': 'image'}"/>
						</div>
						<div class="col-md-9 ons-pricing-app" t-attf-id="{{ slug(option) }}">
							<h3 t-field="option.name" class="mt0 ons-pricing-title data_title"></h3>
							<span t-field="option.price" class="data_price"/> CHF
							<input type="checkbox" t-attf-class="{{ option_class }}" t-attf-id="{{ slug(option) }}"/>
						</div>
					</div>
				</div>
			</t>
		</div>
	</template>

	<template id="invisible_area_depend" name="aahh">
		<div class="row">
			<div class="col-md-4 mb16 ons-pricing-area">
				<table>
					<thead>
				      	<tr>
				        	<th>Nom</th>
				        	<th>prix</th>
				        	<th>depend</th>
				      	</tr>
				    </thead>
				    <tbody>
				    	<t t-foreach="areas" t-as="area">
					    	<t t-foreach="area.depend_area_ids" t-as="depend">
								<tr class="depend_row" t-attf-id="{{ slug(area) }}">
									<td><span t-field="area.name" t-attf-app-id="{{ slug(area) }}" class="depend_app_name"/></td>
									<td><span t-field="area.price" /></td>
									<td><span t-field="depend.name" t-attf-depend-id="{{ slug(depend) }}" class="depend_name"/></td>
								</tr>
							</t>
						</t>
					</tbody>
				</table>
			</div>
		</div>
	</template>

	<template id="opennet_pricing_template" name="Open-net pricing">
		<t t-call="website.layout">
			<script src='/ons_cust_opennet/static/src/js/ons_cust_opennet_pricing.js'/>
			<div class="container">
				<div class="col-md-9">
					<div class="page-header">
					  	<h1>Open-Net <small>pricing</small></h1>
					</div>
					<div class="form-group row">
						<label class="col-2 col-form-label" t-esc="user_price[0]['ons_user_price']" id="user_pricing"/>
					  	<div class="col-10">
					    	<input class="form-control" type="number" value="1" id="user_select" />
					  	</div>
					</div>
					<hr/>
					<div class="row">
						<t t-foreach="areas" t-as="area">
							
							<div class="col-md-4 mb16 ons-pricing-area">
								<div class="row ons-pricing-row">
									<div class="col-md-3 ons-pricing-logo">
										<div t-field="area.logo" t-options="{'widget': 'image'}"/>
									</div>
									<div class="col-md-9 ons-pricing-app" t-attf-id="{{ slug(area) }}">
										<h3 t-field="area.name" class="mt0 ons-pricing-title data_title"></h3>
										<span t-field="area.price" class="data_price"/> CHF
										<t t-if="area.sequence != 1">
											<input type="checkbox" class="area_checkbox checkbox"  t-attf-id="{{ slug(area) }}"/>
											<!-- t-attf-id="{{ area.id }}" -->
										</t>
										<t t-elif="area.sequence == 1">
											<input type="checkbox" disabled="disabled" class="checkbox" checked="checked"/>
										</t>
										<t t-foreach="area.depend_area_ids" t-as="depend">
											<span t-field="depend.name" class="depend_name" t-attf-depend-id="{{ slug(depend) }}"/>
										</t>
									</div>
								</div>
							</div>

						</t>
					</div>
					<hr/>
					<t t-set="options" t-value="options_logi"/>
					<t t-set="option_class">logi_checkbox</t>
					<t t-call="ons_cust_opennet.generic_grid"/>
					<hr/>
					<t t-set="options" t-value="options_tech"/>
					<t t-set="option_class">tech_checkbox</t>
					<t t-call="ons_cust_opennet.generic_grid"/>
					<hr/>
					<t t-set="options" t-value="options_misc"/>
					<t t-set="option_class">misc_checkbox</t>
					<t t-call="ons_cust_opennet.generic_grid"/>
					<hr/>
					<t t-set="options" t-value="hosting"/>
					<t t-set="option_class">hosting_checkbox</t>
					<t t-call="ons_cust_opennet.generic_grid"/>
				</div>
				<div class="col-md-3 col-xs-12 follow-scroll">
					<div class="o_my_contact">  
				        <h3>Pricing</h3>
				        <table class="table">
				        	<thead>
						      	<tr>
						        	<th></th>
						        	<th class="text-right">Monthly</th>
						        	<th class="text-right">Annualy</th>
						      	</tr>
						    </thead>
						    <tbody>
								<tr class="base_row">
									<td><span id="user_selected"/></td>
									<td class="text-right monthly"><span id="monthly_price"/></td>
									<td class="text-right annualy"><span id="annualy_price"/></td>
								</tr>
								<t t-foreach="areas" t-as="area">
									<t t-if="area.sequence == 1">
										<tr class="base_row">
											<td><span t-field="area.name" class="area_name_data"/></td>
											<td class="text-right monthly"><span t-field="area.price" class="area_price_data"/></td>
											<td class="text-right annualy"><span class="area_annualy_price_data"/></td>
										</tr>
									</t>
								</t>

								<tr class="active">
									<td>Total</td>
									<td class="text-right"><span class="monthly_total"/></td>
									<td class="text-right"><span class="annualy_total"/></td>
								</tr>
							</tbody>
						</table>
                    </div>
				</div>
				<!--<t t-call="ons_cust_opennet.invisible_area_depend"></t>-->
			</div>
		
		</t>
		<script>
			<!-- var last_id = -100;
			$('.ons-pricing-area').on("click", function(){
				// Récupérer l'id de l'attribut
				var id_attr = $(this).attr('index-number')
				console.log(id_attr);
				// Afficher la div correspondant à l'id
				if(last_id == id_attr){
					$("[index-number-info="+last_id+"]").toggleClass('hide')
				}
				else{
					$("[index-number-info="+last_id+"]").addClass('hide')
					$("[index-number-info="+id_attr+"]").removeClass('hide')
				}
				last_id = id_attr;
			}); -->
		</script>
	</template>

	<record id="opennet_pricing_user" model="ir.ui.view">
		<field name="name">res.company.form</field>
		<field name="model">res.company</field>
		<field name="inherit_id" ref="base.view_company_form"/>
		<field name="arch" type="xml">
	        <xpath expr="//field[@name='website']" position="after">
	            <field name="ons_user_price" />
	        </xpath>
	    </field>
    </record>

</odoo>
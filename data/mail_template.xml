<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="email_template_opennet_info_cron" model="mail.template">
        <field name="name">Info Cron - Send by Email (Open Net)</field>
        <field name="email_from">support@open-net.ch</field>
        <field name="email_to">${object.ons_cust_person_in_charge.ons_cust_email_two}</field>
        <field name="subject">RAPPEL: Prestation à fournir</field>
        <field name="model_id" ref="stock.model_stock_move"/>
        <field name="auto_delete" eval="False"/> <!-- Should I ? -->
        <field name="lang">${object.partner_id.lang}</field>
        <field name="user_signature" eval="True"/>
        <field name="body_html"><![CDATA[
<p>RAPPEL</p>

% if object.partner_id.parent_id.name:
<p>Partenaire: ${object.partner_id.parent_id.name}, ${object.partner_id.name}</p>
% else:
<p>Partenaire: ${object.partner_id.name}</p>
% endif

<p>Article: ${object.product_id.name}</p>
<p>Description: ${object.name}</p>
% set info = object.info_for_mail_person_in_charge()
% set action = info['action'].id or 2411
% set menu = info['menu'].id or 228
% set date_expected = info['date_expected']
<p>Date prévue: ${date_expected}</p>

<a href="/web?#id=${object.id}&amp;view_type=form&amp;model=stock.move&amp;action=${action}&amp;menu_id=${menu}">Voir la prestation</a>

    ]]></field>
    </record>

    <record id="info_deadline_project_task_cron" model="mail.template">
        <field name="name">Info Cron - Send by Email (Open Net)</field>
        <field name="email_from">support@open-net.ch</field>
        <field name="email_to">${object.user_id.partner_id.ons_cust_email_two}</field>
        <field name="subject">RAPPEL: Tâche non terminée, échéance dépassée</field>
        <field name="model_id" ref="project.model_project_task"/>
        <field name="auto_delete" eval="False"/>
        <field name="lang">${object.user_id.partner_id.lang}</field>
        <field name="user_signature" eval="True"/>
        <field name="body_html"><![CDATA[
<p>RAPPEL</p>

% if object.user_id.partner_id.parent_id.name:
<p>Partenaire: ${object.user_id.partner_id.parent_id.name}, ${object.user_id.partner_id.name}</p>
% else:
<p>Partenaire: ${object.user_id.partner_id.name}</p>
% endif

<p>Titre de la tâche: ${object.name}</p>
<p>Projet: ${object.project_id.name}</p>
<p>La date d'échéance à été dépassée (${object.date_deadline})</p>

% set info = object.info_for_deadline_project_task()
% set action = info['action'].id or 476
% set menu = info['menu'].id or 1055

<a href="/web?#id=${object.id}&amp;view_type=form&amp;model=project.task&amp;action=${action}&amp;menu_id=${menu}">Voir la tâche</a>

    ]]></field>
    </record>

    <record id="extract_email" model="mail.template">
        <field name="name">Extract</field>
        <field name="email_from">support@open-net.ch</field>
        <field name="email_to">eco@open-net.ch</field>
        <field name="subject">Extract email</field>
        <field name="model_id" ref="ons_cust_opennet.model_eagle_contract"/>
        <field name="auto_delete" eval="False"/>
        <field name="lang">${object.user_id.partner_id.lang}</field>
        <field name="user_signature" eval="True"/>
	<field name="body_html"><![CDATA[
	  <h1>Extract email</h1>
	]]></field>
    </record>
</odoo>

<!-- https://github.com/odoo/odoo/blob/fc2e80cb4bcc450762c7ac5cb82a3e2d88062b38/addons/mail/data/mail_data.xml -->
